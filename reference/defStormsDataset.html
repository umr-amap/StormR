<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The defStormsDataset() function creates a stormsDataset object from a NetCDF file.
This is an essential first step before other stormR functions can be used."><title>Creating a stormsDataset object — defStormsDataset • StormR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Creating a stormsDataset object — defStormsDataset"><meta property="og:description" content="The defStormsDataset() function creates a stormsDataset object from a NetCDF file.
This is an essential first step before other stormR functions can be used."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">StormR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/ExtractStorms.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Change log</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/umr-amap/StormR">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Creating a <code>stormsDataset</code> object</h1>
      <small class="dont-index">Source: <a href="https://github.com/umr-amap/StormR/blob/HEAD/R/defStormsDataset.R" class="external-link"><code>R/defStormsDataset.R</code></a></small>
      <div class="d-none name"><code>defStormsDataset.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>defStormsDataset()</code> function creates a <code>stormsDataset</code> object from a NetCDF file.
This is an essential first step before other <code>stormR</code> functions can be used.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">defStormsDataset</span><span class="op">(</span></span>
<span>  filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_dataset.nc"</span>, package <span class="op">=</span> <span class="st">"StormR"</span><span class="op">)</span>,</span>
<span>  fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>names <span class="op">=</span> <span class="st">"name"</span>, seasons <span class="op">=</span> <span class="st">"season"</span>, isoTime <span class="op">=</span> <span class="st">"iso_time"</span>, lon <span class="op">=</span> <span class="st">"usa_lon"</span>,</span>
<span>    lat <span class="op">=</span> <span class="st">"usa_lat"</span>, msw <span class="op">=</span> <span class="st">"usa_wind"</span>, basin <span class="op">=</span> <span class="st">"basin"</span>, sshs <span class="op">=</span> <span class="st">"usa_sshs"</span>, rmw <span class="op">=</span></span>
<span>    <span class="st">"usa_rmw"</span>, pressure <span class="op">=</span> <span class="st">"usa_pres"</span>, poci <span class="op">=</span> <span class="st">"usa_poci"</span><span class="op">)</span>,</span>
<span>  basin <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seasons <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1980</span>, <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"%Y"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  unitConversion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>msw <span class="op">=</span> <span class="st">"knt2ms"</span>, rmw <span class="op">=</span> <span class="st">"nm2km"</span>, pressure <span class="op">=</span> <span class="st">"mb2pa"</span>, poci <span class="op">=</span> <span class="st">"mb2pa"</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>filename</dt>
<dd><p>character. Name of the NetCDF (.nc) file. Default is the <code>test_dataset.nc</code>
file located in the <code>inst/extdata</code> repository of the directory (accessible by
<code>system.file("extdata", "test_dataset.nc", package = "StormR")</code>). This test dataset is extracted
from the IBTrACS.SP.v04r00.nc file and provides all the tropical cyclones that occurred around Vanuatu
from 2015 to 2016 and around New Caledonia from 2020 to 2021.</p></dd>


<dt>fields</dt>
<dd><p>named character vector. This argument allows to specify the corresponding variable names
in the input NetCDF file for each field in the output <code>stormsDataset</code>. By default, the corresponding
variable names are set up to import data from a NetCDF file from the IBTrACS database (Knapp et al., 2010).
Corresponding variable names for following fields have to (mandatory fields) or can be
(recommended or optional fields) provided:</p><ul><li><p>"<code>names"</code>, names of the storms (mandatory),</p></li>
<li><p><code>"seasons"</code>, years of observations (mandatory),</p></li>
<li><p><code>"isoTime"</code>, date and time of observations (mandatory),</p></li>
<li><p><code>"lon"</code>, longitude of the observations (mandatory),</p></li>
<li><p><code>"lat"</code>, latitude of the observations (mandatory),</p></li>
<li><p><code>"msw"</code>, maximum sustained wind speed (mandatory),</p></li>
<li><p><code>"basin"</code>, name of the area where the storm originated (recommended),</p></li>
<li><p><code>"rmw"</code>, radius of maximum winds: distance between the centre of the storm and
its band of strongest winds (recommended),</p></li>
<li><p><code>"pressure"</code>, central pressure (recommended),</p></li>
<li><p><code>"poci"</code>, pressure of the last closed isobar (recommended), and</p></li>
<li><p><code>"sshs"</code>, Saffir-Simpson hurricane wind scale rating based on msw (optional).</p></li>
</ul></dd>


<dt>basin</dt>
<dd><p>character. If the basin field is provided, then storm track data will
only be extracted for the named basin. By default <code>basin=NULL</code>, meaning that all storms
irrespective of the basin they originated in are extracted.
Seven basins can be used to filter the data set:</p><ul><li><p><code>"NA"</code>, for North Atlantic basin,</p></li>
<li><p><code>"SA"</code>, for South Atlantic basin,</p></li>
<li><p><code>"EP"</code>, for Eastern North Pacific basin,</p></li>
<li><p><code>"WP"</code>, for Western North Pacific basin,</p></li>
<li><p><code>"SP"</code>, for South Pacific basin,</p></li>
<li><p><code>"SI"</code>, for South India basin, or</p></li>
<li><p><code>"NI"</code>, for North India basin.</p></li>
</ul></dd>


<dt>seasons</dt>
<dd><p>numeric vector. Seasons of occurrence of the storms (e.g., c(2020,2022)). In the Southern Hemisphere,
the cyclone season extends across two consecutive years. Therefore, to capture the 2021 to 2022 cyclone season both
years should be specified, with cyclones assigned for the year that originated in.
By default all storms occurring since 1980 are extracted.</p></dd>


<dt>unitConversion</dt>
<dd><p>named character vector. <code>StormR</code> functions use the metric system (international
system of units), therefore <code>msw</code> has to be provided in \(m.s^{-1}\), <code>rmw</code> in \(km\), <code>pressure</code>
and <code>poci</code> in \(Pa\). By default <code>unitConversion=c(msw = "knt2ms", rmw = "nm2km", pressure = "mb2pa", poci = "mb2pa")</code> to meet the requirements when importing a NetCDF file from the IBTrACS database.
This argument is mandatory even if no conversion is needed. If no conversion is needed then
use <code>"None"</code> in the corresponding fields. The following unit conversions are implemented:</p>
<p>For <code>msw</code>,</p><ul><li><p><code>"knt2ms"</code>, to convert knot to meter per second (default setting),</p></li>
<li><p><code>"kmh2ms"</code>, to convert kilometre per hour to meter per second,</p></li>
<li><p>"<code>mph2ms"</code>, to convert miles per hour to meter per second, or</p></li>
<li><p><code>"None"</code>, if no conversion is needed.</p></li>
</ul><p>For <code>rmw</code>,</p><ul><li><p><code>"nm_to_ms"</code>to convert nautical miles to kilometre (default setting), or</p></li>
<li><p><code>"None"</code>if no conversion is needed.</p></li>
</ul><p>For <code>pressure</code> and <code>poci</code>,</p><ul><li><p>"<code>mb2pa"</code>, to convert  millibar to Pascal  (default setting),</p></li>
<li><p><code>"b2pa"</code>, to convert bar to Pascal,</p></li>
<li><p><code>"atm2pa"</code>, to convert  atmosphere to Pascal,</p></li>
<li><p><code>"psi2pa"</code>, to convert  psi to Pascal, or</p></li>
<li><p><code>"None"</code>, if no conversion is needed.</p></li>
</ul></dd>


<dt>verbose</dt>
<dd><p>numeric. Whether the function should display (<code>= 1</code>)
or not (<code>= 0</code>) information about the processes.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>The <code>defStormsDataset()</code> function returns a <code>stormsDataset</code> object.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Knapp, K. R., Kruk, M. C., Levinson, D. H., Diamond, H. J., &amp; Neumann, C. J. (2010).
The International Best Track Archive for Climate Stewardship (IBTrACS).
Bulletin of the American Meteorological Society, 91(3), Article 3. https://doi.org/10.1175/2009bams2755.1</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Creating a `stormsDataset` object with storms between 2010 and 2015</span></span></span>
<span class="r-in"><span><span class="co"># in the South Pacific using the NetCDF provided with the package</span></span></span>
<span class="r-in"><span><span class="va">SP_2015_2020</span> <span class="op">&lt;-</span> <span class="fu">defStormsDataset</span><span class="op">(</span>seasons <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2010</span>, <span class="fl">2015</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>No basin argument specified. StormR will work as expected</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>              but cannot use basin filtering for speed-up when collecting data</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> === Loading data  ===</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Open database... /home/runner/work/_temp/Library/StormR/extdata/test_dataset.nc opened</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Collecting data ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> === DONE ===</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">SP_2015_2020</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Formal class 'stormsDataset' [package "StormR"] with 5 slots</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..@ filename: chr "/home/runner/work/_temp/Library/StormR/extdata/test_dataset.nc"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..@ fields  : Named chr [1:11] "name" "season" "iso_time" "usa_lon" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..- attr(*, "names")= chr [1:11] "names" "seasons" "isoTime" "lon" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..@ basin   : chr "None"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..@ seasons : Named num [1:2] 2015 2015</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..- attr(*, "names")= chr [1:2] "min" "max"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..@ database:List of 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ names    : chr [1:2(1d)] "PAM" "SOLO"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ seasons  : num [1:2(1d)] 2015 2015</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ isotimes : chr [1:360, 1:2] "2015-03-07 06:00:00" "2015-03-07 09:00:00" "2015-03-07 12:00:00" "2015-03-07 15:00:00" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ longitude: num [1:360, 1:2] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ latitude : num [1:360, 1:2] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ msw      : num [1:360, 1:2] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ sshs     : num [1:360, 1:2] -5 -5 -5 -5 -5 -5 -5 -5 -5 -5 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ rmw      : num [1:360, 1:2] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ pressure : num [1:360, 1:2] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ poci     : num [1:360, 1:2] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Baptiste Delaporte, Thomas Ibanez, Gunnar Keppel, Swen Jullien, Christophe Menkes, Thomas Arsouze.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

